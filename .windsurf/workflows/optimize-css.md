---
description: Optimize css for best practices, industry standards, performance, and ui/user experience
---

````markdown
## üõ†Ô∏è CSS Optimization Rule ‚Äì GEquip Custom Liquid Theme  
**Goal:** Ship lean, maintainable, and fast-loading CSS that follows modern best practices while staying Shopify/Liquid-friendly.

---

### 1. Tooling & Automation  
| Task | Recommended Tool | Notes |
|------|------------------|-------|
| Linting | **stylelint** + `stylelint-config-standard` | Add `stylelint-config-shopify` for Liquid-aware selectors. |
| Formatting | **Prettier** | Keep a single code style across `.scss` & `.liquid` partials. |
| Transpile & Minify | **PostCSS** (`postcss-preset-env`, `autoprefixer`, `cssnano`) | Target Shopify‚Äôs evergreen browser matrix. |


---

### 2. Architecture & Naming  
1. **Mobile-first** ‚Äì start with the `min-width` defaults, graduate to larger breakpoints.  
2. **BEM + Utility Mix** ‚Äì Components get BEM; helper classes (`.mt-4`) live in a `utilities` partial.  
3. **Design Tokens** ‚Äì Centralize colors/spacing/typography in `:root { --token: value; }`, surfaced in **theme settings** for merchants.  
4. **Scoped Sections** ‚Äì Wrap section styles in a parent ID generated by Liquid (`section.id`) to avoid global bleed.

---

### 3. Performance Budget  
* Total CSS ‚©Ω **65 KB gzip** (inline critical + deferred rest).  
* CLS target < 0.1; FCP ‚â§ 1 s on LTE 4.  
* No more than **2 custom font families**; ship **WOFF2** only; preload first.  

---

### 4. Critical-CSS Strategy  
```liquid
{% render 'critical-css' %}
<link rel="preload" as="style" href="{{ 'theme.css' | asset_url }}" onload="this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="{{ 'theme.css' | asset_url }}"></noscript>
````

* Inline the first \~14 KB that powers header, hero, and above-the-fold product grid.
* Split section-specific CSS into separate `section-name.css` chunks; lazy-load with `requestAnimationFrame` after DOMContentLoaded.

---

### 5. Accessibility & UX

* **Focus states**: minimum 2 px outline contrast ratio ‚â• 3:1.
* Respect `prefers-reduced-motion`; gate all animations behind it.
* Use logical properties (`margin-block`, `padding-inline`) for RTL readiness.

---

### 6. Testing Checklist (CI Gate)

* [ ] `npm run lint` passes with **0 errors / 0 warnings**
* [ ] Lighthouse performance score ‚â• 95 on **‚ÄúProduct‚Äù** & **‚ÄúCollection‚Äù** templates
* [ ] Visual regression screenshots (Chromatic/Playwright) unchanged
* [ ] CLS/FID/Web Vitals under budget on Shopify theme preview URL

---

### 7. Documentation Snippet (for Handbook)


/* Example: Button Component
-------------------------------------------------- */
.button {
  --bg: var(--color-primary);
  --bg-hover: color-mix(in srgb, var(--bg), #000 10%);
  display:inline-flex;align-items:center;gap:.5rem;
  padding:.75rem 1.25rem;
  font:600 1rem/1.2 'Inter', system-ui;
  color:#fff;background:var(--bg);border-radius:.5rem;
  transition:background .2s ease-in-out;
  &:hover{background:var(--bg-hover);}
}
```

> Edit colors in **Settings ‚Üí Global ‚Üí Brand Colors**; do **NOT** tweak here.

---
